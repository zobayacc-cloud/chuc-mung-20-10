<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Neon Heart - Ch√∫c 20/10 R·ª±c R·ª°</title>
<style>
  :root{
    --bg-dark: #0b0210;
    --neon-pink: #ff6fb1;
    --neon-hot: #ff3b8a;
    --accent: #ff9fcf;
    --heart-color-main: #ff3b8a;
    --heart-color-glow: #ff9fcf;
  }
  html,body{
    height:100%;
    margin:0;
    background: radial-gradient(circle at 30% 20%, rgba(255,100,160,0.08), transparent 15%),
                radial-gradient(circle at 70% 80%, rgba(255,80,140,0.06), transparent 18%),
                var(--bg-dark);
    font-family: "Segoe UI", Roboto, sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
  }

  .stage {
    width:900px;
    max-width:95vw;
    height:600px;
    max-height:85vh;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Canvas for particle effects, clipped to heart path */
  canvas#fx {
    position:absolute;
    left:0; top:0;
    width:100%; height:100%;
    z-index:2;
    pointer-events:none;
  }

  /* SVG neon heart sits above canvas so click registers on svg */
  svg#neon {
    width:65%;
    max-width:580px;
    height:auto;
    z-index:3;
    filter: drop-shadow(0 15px 40px rgba(255,20,120,0.25));
    cursor:pointer;
    transition: transform 320ms ease;
  }

  /* Neon stroke style */
  .neon-line {
    fill:none;
    stroke: url(#grad);
    stroke-width:12;
    stroke-linecap:round;
    stroke-linejoin:round;
    stroke-dasharray: 0;
    filter: url(#glow);
    transition: transform 320ms ease;
  }
  
  /* L·ªõp ph·ªß s√°ng tr·∫Øng b√™n trong n√©t neon */
  #heartPath-overlay {
    fill:none;
    stroke: rgba(255,255,255,0.7);
    stroke-width: 2;
    stroke-linecap:round;
    stroke-linejoin:round;
    filter: blur(1px);
    mix-blend-mode: screen;
  }

  /* pulse animation for idle heart */
  @keyframes pulse {
    0% { transform: scale(1); filter: drop-shadow(0 10px 30px rgba(255,50,130,0.2)); }
    50% { transform: scale(1.04); filter: drop-shadow(0 25px 70px rgba(255,50,130,0.4)); }
    100% { transform: scale(1); filter: drop-shadow(0 10px 30px rgba(255,50,130,0.2)); }
  }
  svg#neon.idle { animation: pulse 4s ease-in-out infinite; }

  /* center message card (hidden initially) */
  .card {
    position:absolute;
    width:550px;
    max-width:90%;
    left:50%;
    top:50%;
    transform: translate(-50%,-50%) scale(0.85);
    z-index:6;
    background: linear-gradient(180deg, rgba(255,255,255,1), rgba(255,240,248,0.98));
    border-radius:18px;
    box-shadow: 0 25px 60px rgba(0,0,0,0.55);
    text-align:center;
    padding:35px;
    opacity:0;
    pointer-events:auto;
    border: 3px solid var(--neon-hot);
    box-sizing: border-box;
  }

  .card.show {
    opacity:1;
    transform: translate(-50%,-50%) scale(1);
    transition: all 500ms cubic-bezier(.2,.9,.3,1.1);
  }

  .card h1{
    margin:8px 0 12px;
    font-size:32px;
    color: var(--neon-hot);
    text-shadow: 0 3px 15px rgba(255,80,140,0.35);
  }
  .card p{
    margin:0 0 25px;
    color:#5a0033;
    font-weight:700;
    line-height:1.6;
    font-size:18px;
  }

  .btnClose {
    background: linear-gradient(90deg, var(--neon-pink), var(--neon-hot));
    color:white;
    border:none;
    border-radius:12px;
    padding:12px 25px;
    font-weight:800;
    cursor:pointer;
    box-shadow: 0 10px 25px rgba(255,50,130,0.25);
    transition: transform 200ms ease;
  }
  .btnClose:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 30px rgba(255,50,130,0.4);
  }

  /* small instruction */
  .hint {
    position:absolute;
    bottom:20px;
    width:100%;
    text-align:center;
    font-size:16px;
    color: var(--accent);
    z-index:5;
    text-shadow: 0 0 5px rgba(255,150,200,0.5);
  }

  /* Confetti pieces (for sparkle) and petals/butterflies (new) */
  .sparkle, .petal, .butterfly {
    position:absolute;
    z-index:4;
    pointer-events:none;
    opacity:0;
  }
  
  /* C√°nh hoa h·ªìng */
  .petal {
      width: 14px;
      height: 14px;
      border-radius: 50% 10% 50% 10%;
      background: #ff80a0; /* H·ªìng t∆∞∆°i */
      box-shadow: 0 0 5px rgba(255,150,180,0.5);
      transition: opacity 200ms ease;
  }

  /* C√°nh b∆∞·ªõm (s·ª≠ d·ª•ng emoji ho·∫∑c k√Ω t·ª± ƒë·∫∑c bi·ªát) */
  .butterfly {
      font-size: 20px;
      color: #ffc0e6; /* M√†u neon nh·∫°t */
      text-shadow: 0 0 8px #ff76b1;
      width: auto;
      height: auto;
      transition: opacity 200ms ease;
  }
  
  /* ƒê·ªãnh d·∫°ng cho QR Code (M·ªöI) */
  .qr-container {
      margin-top: 15px;
      padding: 15px 0 5px;
      border-top: 1px dashed rgba(255, 59, 138, 0.3); /* ƒê∆∞·ªùng k·∫ª ph√¢n c√°ch */
      display: flex;
      flex-direction: column;
      align-items: center;
  }
  .qr-container img {
      width: 120px;
      height: 120px;
      border: 3px solid white;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
  }
  .qr-hint {
      font-size: 14px;
      color: var(--neon-hot);
      margin-bottom: 8px !important;
      font-weight: 600;
  }

  @media (max-width:640px){
    .card{ padding:25px; max-width:95%; }
    .card h1{ font-size:24px }
    .card p { font-size:16px }
    .btnClose { padding:10px 20px; }
  }
</style>
</head>
<body>
  <div class="stage" role="main" aria-label="Neon heart animation">
    <canvas id="fx"></canvas>

    <svg id="neon" class="idle" viewBox="0 0 500 500" aria-hidden="false" role="button" title="Click ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="var(--heart-color-glow)"/>
          <stop offset="50%" stop-color="var(--heart-color-main)"/>
          <stop offset="100%" stop-color="#ffc0e6"/>
        </linearGradient>

        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="10" result="blur1"/>
          <feMerge>
            <feMergeNode in="blur1"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>

        <radialGradient id="innerG">
          <stop offset="0%" stop-color="#ffeef8" stop-opacity="0.95"/>
          <stop offset="70%" stop-color="#ffb6d9" stop-opacity="0.08"/>
          <stop offset="100%" stop-color="#000000" stop-opacity="0"/>
        </radialGradient>

      </defs>

      <path id="heartFill" d="M250 430
        C 100 350, 50 160, 180 100
        C 220 80, 280 80, 320 100
        C 450 160, 400 350, 250 430 Z"
        fill="url(#innerG)" opacity="0.75"></path>

      <path id="heartPath" class="neon-line" d="M250 430
        C 100 350, 50 160, 180 100
        C 220 80, 280 80, 320 100
        C 450 160, 400 350, 250 430 Z" />
        
      <path id="heartPath-overlay" d="M250 430
        C 100 350, 50 160, 180 100
        C 220 80, 280 80, 320 100
        C 450 160, 400 350, 250 430 Z" />

      <path id="strokeAnim" d="M250 430
        C 100 350, 50 160, 180 100
        C 220 80, 280 80, 320 100
        C 450 160, 400 350, 250 430 Z"
        fill="none" stroke="rgba(255,255,255,0.18)" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"
        stroke-dasharray="8 10" stroke-dashoffset="0" style="filter: blur(2px); mix-blend-mode:screen;"></path>
    </svg>

    <div class="card" id="card" role="dialog" aria-hidden="true">
      <h1>üíê Ch√∫c M·ª´ng Ng√†y Ph·ª• N·ªØ Vi·ªát Nam 20/10!</h1>
      <p>Ch√∫c ch·ªã em ph·ª• n·ªØ lu√¥n **xinh ƒë·∫πp, h·∫°nh ph√∫c, t·ª± tin v√† m·∫°nh m·∫Ω** ƒë·ªÉ t·ªèa s√°ng r·ª±c r·ª° theo c√°ch ri√™ng c·ªßa m√¨nh m·ªói ng√†y! Y√™u th∆∞∆°ng v√† tr√¢n tr·ªçng! üíñ‚ú®</p>
      
      <div class="qr-container">
          <p class="qr-hint">Qu√©t m√£ ƒë·ªÉ g·ª≠i l·ªùi ch√∫c n√†y cho b·∫°n b√®!</p>
          <img id="qrCodeImage" src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://your-website-address.com/chuc-20-10" alt="QR Code g·ª≠i l·ªùi ch√∫c" />
      </div>

      <button class="btnClose" id="closeBtn">ƒê√≥ng</p>
    </div>

    <div class="hint">Nh·∫•n v√†o tr√°i tim neon r·ª±c r·ª° ƒë·ªÉ nh·∫≠n l·ªùi ch√∫c ‚ú®</div>
  </div>

<script>
/* ---------- Setup canvas and path clipping (Particle FX) ---------- */
const canvas = document.getElementById('fx');
const ctx = canvas.getContext('2d', { alpha: true });

function resize() {
  canvas.width = canvas.clientWidth * devicePixelRatio;
  canvas.height = canvas.clientHeight * devicePixelRatio;
  ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
}
window.addEventListener('resize', resize);
resize();

// get the SVG path d
const svgPath = document.getElementById('heartPath').getAttribute('d');
const path2D = new Path2D(svgPath);

// particle system
const particles = [];
let animating = false;

function rand(min, max){ return Math.random()*(max-min)+min; }

function spawnBurst(x,y, count=100){
  for(let i=0;i<count;i++){
    particles.push({
      x: x + rand(-10,10),
      y: y + rand(-10,10),
      vx: rand(-8,8) * (Math.random() < 0.2 ? 1.5 : 1),
      vy: rand(-12,-4),
      life: rand(80,150),
      age: 0,
      size: rand(2.5,7),
      hue: rand(320,350),
      shape: Math.random() > 0.6 ? 'star' : (Math.random() > 0.5 ? 'rect' : 'circle')
    });
  }
  if(!animating){ animating = true; requestAnimationFrame(loop); }
}

function drawStar(ctx, cx, cy, spikes, outerRadius, innerRadius) {
    let rot = Math.PI / 2 * 3;
    let x = cx;
    let y = cy;
    let step = Math.PI / spikes;

    ctx.beginPath();
    ctx.moveTo(cx, cy - outerRadius);
    for (let i = 0; i < spikes; i++) {
        x = cx + Math.cos(rot) * outerRadius;
        y = cy + Math.sin(rot) * outerRadius;
        ctx.lineTo(x, y);
        rot += step;

        x = cx + Math.cos(rot) * innerRadius;
        y = cy + Math.sin(rot) * innerRadius;
        ctx.lineTo(x, y);
        rot += step;
    }
    ctx.closePath();
    ctx.fill();
}


function loop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  const svg = document.getElementById('neon');
  const rect = svg.getBoundingClientRect();

  ctx.save();
  ctx.translate(rect.left - canvas.getBoundingClientRect().left, rect.top - canvas.getBoundingClientRect().top);
  ctx.scale(rect.width / 500, rect.height / 500);
  ctx.clip(path2D);

  ctx.globalCompositeOperation = 'lighter';
  ctx.fillStyle = 'rgba(255,120,170,0.05)';
  ctx.beginPath();
  ctx.fillRect(-1000,-1000, 3000, 3000);
  ctx.closePath();

  for(let i = particles.length-1; i>=0; i--){
    const p = particles[i];
    p.age++;
    p.vy += 0.25;
    p.x += p.vx;
    p.y += p.vy;
    const alpha = 1 - p.age / p.life;
    if(alpha <= 0){ particles.splice(i,1); continue; }

    const color = `hsla(${p.hue}, 100%, 70%, ${alpha})`;
    ctx.fillStyle = color;
    
    if(p.shape === 'rect'){
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.age * 0.1);
      ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*1.6);
      ctx.restore();
    } else if (p.shape === 'star'){
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.age * 0.05);
        drawStar(ctx, 0, 0, 5, p.size, p.size / 2);
        ctx.restore();
    } else {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
      ctx.fill();
    }
    
    ctx.fillStyle = `rgba(255,120,170,${alpha*0.18})`;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size*4, 0, Math.PI*2);
    ctx.fill();
    if(p.age > p.life) particles.splice(i,1);
  }

  ctx.restore();
  ctx.globalCompositeOperation = 'source-over';

  if(particles.length>0) requestAnimationFrame(loop);
  else animating = false;
}

/* ---------- Click handling ---------- */
const svg = document.getElementById('neon');
const card = document.getElementById('card');
const closeBtn = document.getElementById('closeBtn');
let hasClicked = false;

svg.addEventListener('click', (e) => {
    if (hasClicked) return;
    hasClicked = true;

  const rect = svg.getBoundingClientRect();
  const cx = (e.clientX - rect.left) / rect.width * 500;
  const cy = (e.clientY - rect.top) / rect.height * 500;

  spawnBurst(cx, cy, 150);
  setTimeout(()=> spawnBurst(250,200,100), 100);
  setTimeout(()=> spawnBurst(220,260,110), 250);

  svg.classList.remove('idle');
  svg.style.transition = 'transform 200ms ease';
  svg.style.transform = 'scale(1.08)';
  setTimeout(()=> svg.style.transform = '', 300);
  setTimeout(()=> svg.classList.add('idle'), 600);

  setTimeout(() => {
    card.classList.add('show');
    card.setAttribute('aria-hidden','false');
    launchConfetti();
    launchPetals();
    launchButterflies();
  }, 300);
});

closeBtn.addEventListener('click', () => {
  card.classList.remove('show');
  card.setAttribute('aria-hidden','true');
  hasClicked = false;
});

/* ---------- confetti DOM for extra sparkle ---------- */
function launchConfetti(){
  const stage = document.querySelector('.stage');
  const colors = ['#ff76b1','#ffd1e8','#ff3b8a','#ffe19f','#ffd0f0', '#ffffff'];
  const pieces = 50;
  for(let i=0;i<pieces;i++){
    const el = document.createElement('div');
    el.className = 'sparkle';
    el.style.width = (8 + Math.random()*8) + 'px';
    el.style.height = (12 + Math.random()*12) + 'px';
    el.style.background = colors[Math.floor(Math.random()*colors.length)];
    el.style.opacity = '1';
    stage.appendChild(el);
    animateDomElement(el);
  }
}

/* ---------- Petal Effect ---------- */
function launchPetals(){
    const stage = document.querySelector('.stage');
    const colors = ['#ff6080', '#ffb0c0', '#ffe0e8'];
    const pieces = 30;
    for(let i=0;i<pieces;i++){
        const el = document.createElement('div');
        el.className = 'petal';
        el.style.background = colors[Math.floor(Math.random()*colors.length)];
        el.style.opacity = '1';
        el.style.left = (50 + (Math.random()-0.5)*80) + '%';
        el.style.top = '0%';
        stage.appendChild(el);

        const rotX = (Math.random()-0.5)*1200;
        const rotY = (Math.random()-0.5)*1000;
        const finalY = 700 + Math.random()*200;
        const duration = 5000 + Math.random()*4000;

        el.animate([
            { transform: `translate(0px, 0px) rotateX(0deg) rotateY(0deg) rotateZ(0deg)`, opacity: 1 },
            { transform: `translate(${(Math.random()-0.5)*300}px, ${finalY}px) rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${Math.random()*1000}deg)`, opacity: 0.1 }
        ], {
            duration: duration,
            easing: 'linear',
            fill: 'forwards'
        });
        setTimeout(()=> el.remove(), duration);
    }
}

/* ---------- Butterfly Effect ---------- */
function launchButterflies(){
    const stage = document.querySelector('.stage');
    const pieces = 5;
    for(let i=0;i<pieces;i++){
        const el = document.createElement('div');
        el.className = 'butterfly';
        el.innerHTML = 'ü¶ã';
        el.style.opacity = '1';
        el.style.left = (Math.random()*100) + '%'; 
        el.style.top = (Math.random()*100) + '%';
        stage.appendChild(el);

        const amplitudeX = 100 + Math.random()*150;
        const amplitudeY = 50 + Math.random()*100;
        const speed = 0.0005 + Math.random()*0.0003;
        const duration = 8000 + Math.random()*5000;
        const startX = parseFloat(el.style.left) * stage.clientWidth / 100;
        const startY = parseFloat(el.style.top) * stage.clientHeight / 100;

        let startTime;
        function animateButterfly(timestamp) {
            if (!startTime) startTime = timestamp;
            const elapsed = timestamp - startTime;
            if (elapsed > duration) {
                el.remove();
                return;
            }

            const newX = startX + amplitudeX * Math.sin(elapsed * speed);
            const newY = startY + amplitudeY * Math.cos(elapsed * speed * 0.8) + (elapsed * 0.05);
            
            const rotation = Math.sin(elapsed * speed * 2) * 20;

            el.style.transform = `translate(${newX - startX}px, ${newY - startY}px) rotate(${rotation}deg)`;

            requestAnimationFrame(animateButterfly);
        }
        requestAnimationFrame(animateButterfly);
    }
}


function animateDomElement(el) {
    el.style.left = (50 + (Math.random()-0.5)*40) + '%';
    el.style.top = (45 + (Math.random()-0.5)*10) + '%';
    el.style.transform = `rotate(${Math.random()*360}deg)`;

    const dx = (Math.random()-0.5)*400;
    const dy = 200 + Math.random()*300;
    const rot = (Math.random()-0.5)*720;
    
    el.animate([
        { transform: `translate(0px,0px) rotate(0deg)`, opacity:1 },
        { transform: `translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity:0.02 }
    ], {
        duration: 1200 + Math.random()*900,
        easing: 'cubic-bezier(.12,.9,.28,1)'
    });
    setTimeout(()=> el.remove(), 2200);
}


/* ---------- initial gentle inner shimmer (stroke dash animation) ---------- */
(function animateStroke(){
  const s = document.getElementById('strokeAnim');
  let offset = 0;
  (function tick(){
    offset = (offset + 2.0) % 18;
    s.style.strokeDashoffset = offset;
    requestAnimationFrame(tick);
  })();
})();
</script>
</body>
</html>